#!nsh
#
# @name X-UAV Mini Talon
#
# @type Plane V-Tail
# @class Plane
#
# @output MAIN1 aileron right
# @output MAIN2 aileron left
# @output MAIN3 v-tail right
# @output MAIN4 v-tail left
# @output MAIN5 throttle
# @output MAIN6 wheel
# @output MAIN7 flaps right
# @output MAIN8 flaps left
#
# @output AUX1 feed-through of RC AUX1 channel
# @output AUX2 feed-through of RC AUX2 channel
# @output AUX3 feed-through of RC AUX3 channel
#
# @maintainer Friedrich Beckmann <friedrich.beckmann@hs-augsburg.de>
#

sh /etc/init.d/rc.fw_defaults

if [ $AUTOCNF = yes ]
then
	param set FW_AIRSPD_MIN 9
	param set FW_AIRSPD_TRIM 15
	param set FW_AIRSPD_MAX 35

	param set FW_MAN_P_MAX 60
	param set FW_MAN_R_MAX 60
	param set FW_R_LIM 55

	param set FW_WR_FF 0.2
	param set FW_WR_I 0.2
	param set FW_WR_IMAX 0.8
	param set FW_WR_P 1
	param set FW_W_RMAX 0

	# set disarmed value for the ESC
	param set PWM_DISARMED 1000

	

fi

# 自定义参数,当确定不再改的时候就写在卡里面
	param set FW_L1_PERIOD 10
	param set FW_LND_AIRSPD_SC 1.1
	param set FW_LND_FLALT 6
	# param set FW_T_THRO_CONST 4
	# param set FW_T_TIME_CONST 3
	param set NAV_GPSF_LT 180
	param set NAV_GPSF_P 0.5
	param set NAV_GPSF_TR 0.4
	# 到达边界时进入return mode
	param set GF_ACTION 3
	# 东八区的UTC偏移 60*8
	# param set SDLOG_UTC_OFFSET 480
	# 磁力计3面校准
	param set CAL_MAG_SIDES 38
	param set SYS_COMPANION 57600
	param set BAT_N_CELLS 4
	# 电量低时设置return mode
	# param set COM_LOW_BAT_ACT 1
	# param set FW_THR_CRUISE 0.5
	param set MIS_TAKEOFF_ALT 40
	# param set NAV_LOITER_RAD 70
	param set RTL_RETURN_ALT 60
	param set RTL_DESCEND_ALT 50
	# param set FW_T_SPDWEIGHT 0.7
	# param set COM_DISARM_LAND 1



# The Mini Talon does not have a wheel and
# no flaps. I leave them here because the mixer
# computes also wheel and flap controls.
set MIXER AAVVTWFF_vtail

# use PWM parameters for throttle channel
set PWM_OUT 5
